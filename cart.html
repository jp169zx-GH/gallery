<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart - The Nook Taipei</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: 'Helvetica Neue', Arial, sans-serif;
        line-height: 1.6;
        color: #1a1a1a;
        background-color: #f5f3f0;
        padding: 2rem;
    }

    .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        padding: 3rem;
        box-shadow: 0 5px 25px rgba(0,0,0,0.1);
    }

    h1 {
        font-size: 2.5rem;
        margin-bottom: 2rem;
        font-weight: 300;
        letter-spacing: 3px;
        text-align: center;
    }

    .products-section {
        margin-bottom: 3rem;
        padding-bottom: 3rem;
        border-bottom: 2px solid #e0e0e0;
    }

    .products-section h2 {
        font-size: 1.8rem;
        margin-bottom: 2rem;
        font-weight: 400;
        letter-spacing: 2px;
    }

    .product-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 2rem;
    }

    .product-card {
        border: 1px solid #e0e0e0;
        padding: 1.5rem;
        background: #fafafa;
    }

    .product-card h3 {
        font-size: 1.2rem;
        margin-bottom: 0.5rem;
        font-weight: 400;
    }

    .product-card .artist {
        color: #666;
        font-size: 0.9rem;
        margin-bottom: 0.5rem;
    }

    .product-card .price {
        font-size: 1.5rem;
        color: #1a1a1a;
        margin: 1rem 0;
        font-weight: 500;
    }

    .product-card .copyright {
        font-size: 0.75rem;
        color: #888;
        margin: 1rem 0;
        font-style: italic;
    }

    .add-to-cart-btn {
        width: 100%;
        padding: 0.8rem;
        background-color: #1a1a1a;
        color: white;
        border: none;
        cursor: pointer;
        font-size: 0.9rem;
        letter-spacing: 1px;
        transition: background-color 0.3s;
    }

    .add-to-cart-btn:hover {
        background-color: #333;
    }

    .add-to-cart-btn:active {
        background-color: #000;
    }

    .cart-section {
        margin-top: 3rem;
    }

    .cart-section h2 {
        font-size: 1.8rem;
        margin-bottom: 2rem;
        font-weight: 400;
        letter-spacing: 2px;
    }

    .cart-empty {
        text-align: center;
        padding: 3rem;
        color: #666;
        font-size: 1.1rem;
    }

    .cart-items {
        margin-bottom: 2rem;
    }

    .cart-item {
        display: grid;
        grid-template-columns: 2fr 1fr 1fr 1fr auto;
        gap: 1rem;
        padding: 1.5rem;
        border-bottom: 1px solid #e0e0e0;
        align-items: center;
    }

    .cart-item:hover {
        background-color: #fafafa;
    }

    .item-info h4 {
        font-size: 1.1rem;
        margin-bottom: 0.3rem;
        font-weight: 400;
    }

    .item-info .artist {
        color: #666;
        font-size: 0.9rem;
    }

    .item-price {
        font-size: 1.2rem;
        font-weight: 500;
    }

    .item-quantity {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .qty-btn {
        width: 30px;
        height: 30px;
        border: 1px solid #1a1a1a;
        background: white;
        cursor: pointer;
        font-size: 1.2rem;
        display: flex;
        align-items: center;
        justify-content: center;
    }

    .qty-btn:hover {
        background-color: #1a1a1a;
        color: white;
    }

    .qty-display {
        width: 40px;
        text-align: center;
        font-weight: 500;
    }

    .item-total {
        font-size: 1.2rem;
        font-weight: 500;
    }

    .remove-btn {
        background: none;
        border: none;
        color: #e74c3c;
        cursor: pointer;
        font-size: 1.3rem;
        padding: 0.5rem;
    }

    .remove-btn:hover {
        color: #c0392b;
    }

    .cart-summary {
        background: #fafafa;
        padding: 2rem;
        border: 1px solid #e0e0e0;
        max-width: 500px;
        margin-left: auto;
    }

    .summary-row {
        display: flex;
        justify-content: space-between;
        padding: 0.8rem 0;
        font-size: 1.1rem;
    }

    .summary-row.subtotal {
        border-bottom: 1px solid #e0e0e0;
    }

    .summary-row.total {
        border-top: 2px solid #1a1a1a;
        font-size: 1.4rem;
        font-weight: 600;
        padding-top: 1rem;
        margin-top: 0.5rem;
    }

    .free-shipping-notice {
        background: #d4edda;
        color: #155724;
        padding: 1rem;
        margin: 1rem 0;
        border-left: 4px solid #28a745;
        font-size: 0.95rem;
    }

    .shipping-progress {
        background: #fff3cd;
        color: #856404;
        padding: 1rem;
        margin: 1rem 0;
        border-left: 4px solid #ffc107;
        font-size: 0.95rem;
    }

    .checkout-btn {
        width: 100%;
        padding: 1.2rem;
        background-color: #1a1a1a;
        color: white;
        border: none;
        cursor: pointer;
        font-size: 1.1rem;
        letter-spacing: 2px;
        margin-top: 1.5rem;
        transition: background-color 0.3s;
    }

    .checkout-btn:hover {
        background-color: #333;
    }

    .checkout-btn:disabled {
        background-color: #ccc;
        cursor: not-allowed;
    }

    @media (max-width: 768px) {
        .container {
            padding: 1.5rem;
        }

        .cart-item {
            grid-template-columns: 1fr;
            gap: 0.5rem;
        }

        .item-quantity {
            justify-content: flex-start;
        }
    }
</style>


</head>


    <!-- Shopping Cart Section -->
    <div class="cart-section">
        <h2>SHOPPING CART</h2>
        <div id="cartContent">
            <div class="cart-empty">Your cart is empty</div>
        </div>
    </div>
</div>

<script>
    // Cart data loaded from localStorage
    let cart = JSON.parse(localStorage.getItem('shoppingCart') || '[]');

    // Tax rate (adjust as needed - example: 7.8% sales tax)
    const TAX_RATE = 0.078;

    // Free shipping threshold
    const FREE_SHIPPING_THRESHOLD = 300;

    // Flat shipping rate for orders under threshold
    const SHIPPING_COST = 25;

    // Add item to cart
    function addToCart(title, artist, price) {
        // Check if item already exists in cart
        const existingItem = cart.find(item => item.title === title);
       
        if (existingItem) {
            existingItem.quantity += 1;
        } else {
            cart.push({
                title: title,
                artist: artist,
                price: price,
                quantity: 1
            });
        }
       
        // Save to localStorage
        saveCart();
        updateCart();
       
        // Visual feedback
        alert(`"${title}" added to cart!`);
    }

    // Save cart to localStorage
    function saveCart() {
        localStorage.setItem('shoppingCart', JSON.stringify(cart));
    }

    // Update quantity
    function updateQuantity(title, change) {
        const item = cart.find(item => item.title === title);
        if (item) {
            item.quantity += change;
            if (item.quantity <= 0) {
                removeFromCart(title);
            } else {
                saveCart();
                updateCart();
            }
        }
    }

    // Remove item from cart
    function removeFromCart(title) {
        cart = cart.filter(item => item.title !== title);
        saveCart();
        updateCart();
    }

    // Calculate totals
    function calculateTotals() {
        const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
        const shipping = subtotal >= FREE_SHIPPING_THRESHOLD ? 0 : SHIPPING_COST;
        const tax = subtotal * TAX_RATE;
        const total = subtotal + shipping + tax;
       
        return {
            subtotal: subtotal,
            shipping: shipping,
            tax: tax,
            total: total
        };
    }

    // Update cart display
    function updateCart() {
        const cartContent = document.getElementById('cartContent');
       
        if (cart.length === 0) {
            cartContent.innerHTML = '<div class="cart-empty">Your cart is empty</div>';
            return;
        }

        const totals = calculateTotals();
        const amountToFreeShipping = FREE_SHIPPING_THRESHOLD - totals.subtotal;

        let html = '<div class="cart-items">';
       
        // Display cart items
        cart.forEach(item => {
            const itemTotal = item.price * item.quantity;
            html += `
                <div class="cart-item">
                    <div class="item-info">
                        <h4>${item.title}</h4>
                        <p class="artist">by ${item.artist}</p>
                    </div>
                    <div class="item-price">$${item.price.toFixed(2)}</div>
                    <div class="item-quantity">
                        <button class="qty-btn" onclick="updateQuantity('${item.title}', -1)">âˆ’</button>
                        <div class="qty-display">${item.quantity}</div>
                        <button class="qty-btn" onclick="updateQuantity('${item.title}', 1)">+</button>
                    </div>
                    <div class="item-total">$${itemTotal.toFixed(2)}</div>
                    <button class="remove-btn" onclick="removeFromCart('${item.title}')" title="Remove item">âœ•</button>
                </div>
            `;
        });
       
        html += '</div>';

        // Shipping notice
        if (totals.subtotal >= FREE_SHIPPING_THRESHOLD) {
            html += `
                <div class="free-shipping-notice">
                    ðŸŽ‰ Congratulations! You qualify for FREE SHIPPING!
                </div>
            `;
        } else if (amountToFreeShipping > 0) {
            html += `
                <div class="shipping-progress">
                    ðŸ’¡ Add $${amountToFreeShipping.toFixed(2)} more to qualify for FREE SHIPPING!
                </div>
            `;
        }

        // Cart summary
        html += `
            <div class="cart-summary">
                <div class="summary-row subtotal">
                    <span>Subtotal:</span>
                    <span>$${totals.subtotal.toFixed(2)}</span>
                </div>
                <div class="summary-row">
                    <span>Shipping:</span>
                    <span>${totals.shipping === 0 ? 'FREE' : '$' + totals.shipping.toFixed(2)}</span>
                </div>
                <div class="summary-row">
                    <span>Tax (${(TAX_RATE * 100).toFixed(1)}%):</span>
                    <span>$${totals.tax.toFixed(2)}</span>
                </div>
                <div class="summary-row total">
                    <span>TOTAL:</span>
                    <span>$${totals.total.toFixed(2)}</span>
                </div>
                <button class="checkout-btn" onclick="proceedToCheckout()">
                    PROCEED TO CHECKOUT
                </button>
            </div>
        `;

        cartContent.innerHTML = html;
    }

    // Checkout function
    function proceedToCheckout() {
        if (cart.length === 0) {
            alert('Your cart is empty!');
            return;
        }

        // Save cart to localStorage for checkout page
        localStorage.setItem('checkoutCart', JSON.stringify(cart));
       
        // Redirect to checkout page
        window.location.href = 'checkout.html';
    }

    // Initialize cart display
    updateCart();
</script>


</body>
</html>